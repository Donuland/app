<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç© Donuland Management System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="donut">üç©</div>
            <h1>Donuland Management System</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p>Inicializuji syst√©m...</p>
        </div>
    </div>

    <!-- Main App -->
    <div class="app" id="mainApp" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üç© Donuland Management System</h1>
                <div class="header-controls">
                    <button class="btn btn-refresh" onclick="loadData()">
                        <span id="loadBtn">üîÑ Naƒç√≠st data</span>
                    </button>
                    <div class="status" id="status">
                        <span class="status-dot"></span>
                        <span>Offline</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <button class="nav-btn active" data-section="prediction">ü§ñ AI Predikce</button>
            <button class="nav-btn" data-section="calendar">üìÖ Kalend√°≈ô</button>
            <button class="nav-btn" data-section="analytics">üìä Anal√Ωzy</button>
            <button class="nav-btn" data-section="settings">‚öôÔ∏è Nastaven√≠</button>
        </nav>

        <!-- Main Content -->
        <main class="main">
            <!-- AI PREDIKCE SECTION -->
            <section class="section active" id="prediction">
                <div class="section-header">
                    <h2>ü§ñ AI Predikce prodeje</h2>
                    <p>Inteligentn√≠ odhad prodeje na z√°kladƒõ historick√Ωch dat, poƒças√≠ a lokace</p>
                </div>

                <!-- Formul√°≈ô z√°kladn√≠ch √∫daj≈Ø -->
                <div class="card">
                    <h3>üìã Z√°kladn√≠ √∫daje o akci</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>N√°zev akce *</label>
                            <input type="text" id="eventName" placeholder="Burger Fest, ƒåokoFest..." 
                                   list="eventNames" onchange="updatePrediction()">
                            <datalist id="eventNames"></datalist>
                        </div>
                        
                        <div class="form-group">
                            <label>Kategorie *</label>
                            <select id="category" onchange="updatePrediction()">
                                <option value="">Vyberte kategorii</option>
                                <option value="food festival">Food festival</option>
                                <option value="veletrh">Veletrh/ƒåokoFest</option>
                                <option value="koncert">Koncert</option>
                                <option value="kulturn√≠ akce">Kulturn√≠ akce</option>
                                <option value="sportovn√≠">Sportovn√≠ akce</option>
                                <option value="ostatn√≠">Ostatn√≠</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Mƒõsto *</label>
                            <input type="text" id="city" placeholder="Praha, Brno, Ostrava..." 
                                   list="cities" onchange="updateDistance(); updateWeather(); updatePrediction()">
                            <datalist id="cities">
                                <option value="Praha">
                                <option value="Brno">
                                <option value="Ostrava">
                                <option value="Plze≈à">
                                <option value="Liberec">
                                <option value="Olomouc">
                                <option value="Hradec Kr√°lov√©">
                                <option value="Pardubice">
                                <option value="ƒåesk√© Budƒõjovice">
                                <option value="√öst√≠ nad Labem">
                            </datalist>
                        </div>
                        
                        <div class="form-group">
                            <label>Datum akce *</label>
                            <input type="date" id="eventDate" onchange="updateWeather(); updatePrediction()">
                        </div>
                        
                        <div class="form-group">
                            <label>Oƒçek√°van√° n√°v≈°tƒõvnost *</label>
                            <input type="number" id="visitors" placeholder="5000" min="50" onchange="updatePrediction()">
                        </div>
                        
                        <div class="form-group">
                            <label>Konkurence *</label>
                            <select id="competition" onchange="updatePrediction()">
                                <option value="">Vyberte √∫rove≈à</option>
                                <option value="1">1 - Mal√° konkurence</option>
                                <option value="2">2 - St≈ôedn√≠ konkurence</option>
                                <option value="3">3 - Velk√° konkurence</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Typ akce *</label>
                            <select id="eventType" onchange="updateWeatherCard(); updatePrediction()">
                                <option value="">Vyberte typ</option>
                                <option value="outdoor">üå§Ô∏è Venkovn√≠ (poƒças√≠ ovlivn√≠)</option>
                                <option value="indoor">üè¢ Vnit≈ôn√≠ (bez vlivu poƒças√≠)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Business model *</label>
                            <select id="businessModel" onchange="updateBusinessInfo(); updatePrediction()">
                                <option value="">Vyberte model</option>
                                <option value="owner">üè™ Majitel (vy + brig√°dn√≠ci)</option>
                                <option value="employee">üë®‚Äçüíº Zamƒõstnanec (+ % z obratu)</option>
                                <option value="franchise">ü§ù Fran≈°√≠za (n√°kup 52 Kƒç/ks)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="businessInfo" class="business-info" style="display: none;"></div>
                </div>

                <!-- N√°klady a n√°jem -->
                <div class="card">
                    <h3>üí∞ N√°klady a logistika</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Typ n√°jmu *</label>
                            <select id="rentType" onchange="updateRentFields(); updatePrediction()">
                                <option value="">Vyberte typ</option>
                                <option value="fixed">Fixn√≠ n√°jem</option>
                                <option value="percentage">% z obratu</option>
                                <option value="mixed">Fixn√≠ + % z obratu</option>
                                <option value="free">Zdarma</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="fixedRentGroup" style="display: none;">
                            <label>Fixn√≠ n√°jem (Kƒç)</label>
                            <input type="number" id="fixedRent" placeholder="5000" onchange="updatePrediction()">
                        </div>
                        
                        <div class="form-group" id="percentageGroup" style="display: none;">
                            <label>% z obratu</label>
                            <input type="number" id="percentage" placeholder="15" max="100" onchange="updatePrediction()">
                        </div>
                        
                        <div class="form-group" id="mixedFixedGroup" style="display: none;">
                            <label>Fixn√≠ ƒç√°st (Kƒç)</label>
                            <input type="number" id="mixedFixed" placeholder="2000" onchange="updatePrediction()">
                        </div>
                        
                        <div class="form-group" id="mixedPercentageGroup" style="display: none;">
                            <label>% ƒç√°st z obratu</label>
                            <input type="number" id="mixedPercentage" placeholder="10" max="100" onchange="updatePrediction()">
                        </div>
                        
                        <div class="form-group">
                            <label>Vzd√°lenost od Prahy</label>
                            <input type="text" id="distance" readonly placeholder="Automaticky">
                        </div>
                        
                        <div class="form-group">
                            <label>Cena donut (Kƒç)</label>
                            <input type="number" id="price" value="50" onchange="updatePrediction()">
                        </div>
                    </div>
                </div>

                <!-- Poƒças√≠ (jen pro venkovn√≠ akce) -->
                <div class="card" id="weatherCard" style="display: none;">
                    <h3>üå§Ô∏è P≈ôedpovƒõƒè poƒças√≠</h3>
                    <div id="weatherDisplay">
                        <p>Vyberte mƒõsto a datum pro naƒçten√≠ p≈ôedpovƒõdi poƒças√≠</p>
                    </div>
                </div>

                <!-- Historick√° data -->
                <div class="card" id="historicalCard" style="display: none;">
                    <h3>üìà Podobn√© akce z historie</h3>
                    <div id="historicalData"></div>
                </div>

                <!-- V√Ωsledky predikce -->
                <div class="card results-card">
                    <h3>üìä V√Ωsledky predikce</h3>
                    <div id="predictionResults">
                        <p class="placeholder">Vypl≈àte v≈°echna povinn√° pole pro zobrazen√≠ predikce</p>
                    </div>
                    
                    <div class="action-buttons" style="display: none;" id="actionButtons">
                        <button class="btn btn-save" onclick="savePrediction()">üíæ Ulo≈æit predikci</button>
                        <button class="btn btn-export" onclick="exportPrediction()">üìÑ Export</button>
                    </div>
                </div>
            </section>

            <!-- KALEND√Å≈ò SECTION -->
            <section class="section" id="calendar">
                <div class="section-header">
                    <h2>üìÖ Kalend√°≈ô akc√≠</h2>
                    <p>P≈ôehled v≈°ech napl√°novan√Ωch akc√≠</p>
                </div>

                <!-- Kalend√°≈ô Controls -->
                <div class="card">
                    <div class="calendar-controls">
                        <button class="btn" onclick="previousMonth()">‚Äπ P≈ôedchoz√≠</button>
                        <h3 id="currentMonth">≈ò√≠jen 2024</h3>
                        <button class="btn" onclick="nextMonth()">N√°sleduj√≠c√≠ ‚Ä∫</button>
                        <button class="btn btn-today" onclick="goToToday()">Dnes</button>
                    </div>
                    
                    <div class="calendar-filters">
                        <select id="cityFilter" onchange="filterCalendar()">
                            <option value="">V≈°echna mƒõsta</option>
                        </select>
                        <select id="categoryFilter" onchange="filterCalendar()">
                            <option value="">V≈°echny kategorie</option>
                        </select>
                    </div>
                </div>

                <!-- Kalend√°≈ôn√≠ m≈ô√≠≈æka -->
                <div class="card">
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Kalend√°≈ô se vygeneruje JS -->
                    </div>
                </div>

                <!-- Seznam akc√≠ pro aktu√°ln√≠ mƒõs√≠c -->
                <div class="card">
                    <h3>üìã Akce v tomto mƒõs√≠ci</h3>
                    <div id="monthEvents"></div>
                </div>
            </section>

            <!-- ANAL√ùZY SECTION -->
            <section class="section" id="analytics">
                <div class="section-header">
                    <h2>üìä Anal√Ωzy a statistiky</h2>
                    <p>Detailn√≠ p≈ôehled v√Ωkonnosti akc√≠</p>
                </div>

                <!-- Celkov√© statistiky -->
                <div class="card">
                    <h3>üìà Celkov√© statistiky</h3>
                    <div id="overallStats" class="stats-grid">
                        <!-- Stats se napln√≠ JS -->
                    </div>
                </div>

                <!-- Top v√Ωsledky -->
                <div class="analytics-grid">
                    <div class="card">
                        <h3>üèÜ Nej√∫spƒõ≈°nƒõj≈°√≠ akce</h3>
                        <div id="topEvents"></div>
                    </div>
                    
                    <div class="card">
                        <h3>üèôÔ∏è Nejlep≈°√≠ mƒõsta</h3>
                        <div id="topCities"></div>
                    </div>
                    
                    <div class="card">
                        <h3>üìä Nejlep≈°√≠ kategorie</h3>
                        <div id="topCategories"></div>
                    </div>
                </div>

                <!-- Trendy a porovn√°n√≠ -->
                <div class="card">
                    <h3>üìâ Trendy v ƒçase</h3>
                    <div class="chart-container">
                        <canvas id="trendsChart" width="400" height="200"></canvas>
                    </div>
                </div>

                <!-- Predikce vs realita -->
                <div class="card">
                    <h3>üéØ P≈ôesnost predikc√≠</h3>
                    <div id="predictionAccuracy"></div>
                </div>
            </section>

            <!-- NASTAVEN√ç SECTION -->
            <section class="section" id="settings">
                <div class="section-header">
                    <h2>‚öôÔ∏è Nastaven√≠ syst√©mu</h2>
                    <p>Konfigurace API a business parametr≈Ø</p>
                </div>

                <!-- API nastaven√≠ -->
                <div class="card">
                    <h3>üîó API nastaven√≠</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Google Sheets URL</label>
                            <input type="url" id="sheetsUrl" 
                                   value="https://docs.google.com/spreadsheets/d/1LclCz9hb0hlb1D92OyVqk6Cbam7PRK6KgAzGgiGs6iE/edit?usp=sharing">
                        </div>
                        
                        <div class="form-group">
                            <label>OpenWeather API Key</label>
                            <input type="password" id="weatherKey" value="c2fb0e86623880dc86162892b0fd9c95">
                        </div>
                        
                        <div class="form-group">
                            <label>Google Maps API Key</label>
                            <input type="password" id="mapsKey" value="AIzaSyBTTA_MKa6FrxKpkcd7c5-d3FnC6FBLVTc">
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-save" onclick="saveSettings()">üíæ Ulo≈æit</button>
                        <button class="btn" onclick="testConnections()">üîß Test p≈ôipojen√≠</button>
                        <button class="btn" onclick="resetSettings()">üîÑ Reset</button>
                    </div>
                </div>

                <!-- Business parametry -->
                <div class="card">
                    <h3>üíº Business parametry</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>N√°klad na donut (Kƒç)</label>
                            <input type="number" id="donutCost" value="32" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label>Cena pro fran≈°√≠zy (Kƒç)</label>
                            <input type="number" id="franchisePrice" value="52" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label>Hodinov√° mzda (Kƒç)</label>
                            <input type="number" id="hourlyWage" value="150">
                        </div>
                        
                        <div class="form-group">
                            <label>Pracovn√≠ hodin na akci</label>
                            <input type="number" id="workHours" value="10">
                        </div>
                        
                        <div class="form-group">
                            <label>N√°klady dopravy (Kƒç/km)</label>
                            <input type="number" id="fuelCost" value="15" step="0.1">
                        </div>
                    </div>
                </div>

                <!-- Predikƒçn√≠ faktory -->
                <div class="card">
                    <h3>üß† Predikƒçn√≠ faktory</h3>
                    <div class="factors-grid">
                        <div class="factor-group">
                            <h4>Kategorie akc√≠</h4>
                            <div class="factor-item">
                                <label>Food festival</label>
                                <input type="number" id="factorFood" value="0.15" step="0.01">
                            </div>
                            <div class="factor-item">
                                <label>Veletrh/ƒåokoFest</label>
                                <input type="number" id="factorVeletrh" value="0.18" step="0.01">
                            </div>
                            <div class="factor-item">
                                <label>Koncert</label>
                                <input type="number" id="factorKoncert" value="0.08" step="0.01">
                            </div>
                        </div>
                        
                        <div class="factor-group">
                            <h4>Mƒõsta</h4>
                            <div class="factor-item">
                                <label>Praha</label>
                                <input type="number" id="factorPraha" value="1.3" step="0.1">
                            </div>
                            <div class="factor-item">
                                <label>Brno</label>
                                <input type="number" id="factorBrno" value="1.2" step="0.1">
                            </div>
                            <div class="factor-item">
                                <label>Ostatn√≠ mƒõsta</label>
                                <input type="number" id="factorOther" value="0.85" step="0.1">
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="resetFactors()">üîÑ Obnovit v√Ωchoz√≠ faktory</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Notifications -->
    <div id="notifications"></div>

    <!-- Modal pro editaci akce -->
    <div class="modal" id="eventModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Editovat akci</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>N√°zev akce</label>
                    <input type="text" id="modalEventName">
                </div>
                <div class="form-group">
                    <label>Re√°lnƒõ prod√°no (pro probƒõhl√© akce)</label>
                    <input type="number" id="modalSales">
                </div>
                <div class="form-group">
                    <label>Pozn√°mka</label>
                    <textarea id="modalNotes" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-save" onclick="saveEventEdit()">üíæ Ulo≈æit</button>
                <button class="btn btn-delete" onclick="deleteEvent()">üóëÔ∏è Smazat</button>
                <button class="btn" onclick="closeModal()">Zru≈°it</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
